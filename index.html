<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merry Christmas My Queen</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --red-flat: #ff4d6d;
            --pink-bg: #ffafcc;
            --soft-pink: #ffc2d1;
            --white: #ffffff;
            --text-dark: #590d22;
        }

        body {
            margin: 0; padding: 0;
            background: linear-gradient(135deg, #ffc2d1 25%, #ffafcc 25%, #ffafcc 50%, #ffc2d1 50%, #ffc2d1 75%, #ffafcc 75%, #ffafcc 100%);
            background-size: 40px 40px;
            height: 100vh;
            display: flex; justify-content: center; align-items: center;
            flex-direction: column; overflow: hidden;
            font-family: 'Quicksand', sans-serif;
        }

        .handwriting { font-family: 'Dancing Script', cursive; }

        /* --- D·∫¢I ƒê√àN --- */
        .lights { position: fixed; top: 0; width: 100%; display: flex; justify-content: space-around; padding: 10px 0; z-index: 1500; }
        .light { width: 25px; height: 25px; border-radius: 50%; animation: blink 0.8s infinite alternate; }
        @keyframes blink { from { opacity: 0.3; transform: scale(0.8); } to { opacity: 1; transform: scale(1.2); box-shadow: 0 0 25px currentColor; } }

        /* --- LOADING --- */
        #loading-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #ffc2d1; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 2000; transition: opacity 0.8s ease; }

        /* --- B·∫¢NG M·∫¨T KH·∫®U --- */
        #password-screen { display: none; text-align: center; z-index: 1000; background: rgba(255, 255, 255, 0.9); padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: opacity 0.5s; }
        #password-input { padding: 12px; border-radius: 20px; border: 2px solid var(--red-flat); outline: none; text-align: center; font-family: 'Quicksand'; width: 220px; font-size: 16px; margin-bottom: 15px; }

        /* --- N√öT B·∫ÆT ƒê·∫¶U --- */
        #start-btn-container { display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 100; opacity: 0; transition: opacity 0.6s ease; }
        .capsule-2d { background-color: var(--red-flat); color: var(--white); border: 2px solid white; padding: 15px 40px; border-radius: 100px; font-size: 20px; font-weight: 700; cursor: pointer; box-shadow: 0 8px 20px rgba(0,0,0,0.15); transition: 0.3s; }

        /* --- THI·ªÜP --- */
        .card-container { display: none; opacity: 0; perspective: 1500px; width: 340px; height: 460px; position: relative; z-index: 20; transition: opacity 1s ease, transform 1s ease-in-out; }
        .card-container.is-visible { display: block; opacity: 1; }
        .card-container.is-open { transform: translateX(170px); }
        .book { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; transition: 1.2s cubic-bezier(0.645, 0.045, 0.355, 1); }
        .page { width: 100%; height: 100%; position: absolute; top: 0; left: 0; border-radius: 8px; transform-origin: left; transition: 1.2s; box-shadow: 0 4px 15px rgba(0,0,0,0.08); }
        .cover-front { background: var(--red-flat); color: white; z-index: 10; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 25px; box-sizing: border-box; backface-visibility: hidden; border: 2px solid white; cursor: pointer; }
        
        /* C·∫≠p nh·∫≠t trang page-left */
        .page-left { background: #fff9fa; z-index: 9; display: flex; flex-direction: column; justify-content: center; align-items: center; transform: rotateY(0deg); backface-visibility: visible; border: 1px solid #ffe5ec; }
        
        /* FIX: Th√™m rotateY(180deg) cho n·ªôi dung b√™n trong trang tr√°i ƒë·ªÉ kh√¥ng b·ªã ng∆∞·ª£c */
        .page-left-content { transform: rotateY(180deg); display: flex; flex-direction: column; align-items: center; width: 100%; height: 100%; justify-content: center; }

        .book.open .cover-front, .book.open .page-left { transform: rotateY(-180deg); }
        .page-right { background: white; z-index: 1; padding: 25px; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; border: 1px solid #ffe5ec; box-sizing: border-box; }
        
        .ny-photo { width: 85%; height: 75%; object-fit: cover; border: 5px solid white; border-radius: 5px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }

        #secret-btn-wrapper { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 10; transition: transform 1.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 1s ease; opacity: 0; display: none; }
        #secret-btn-wrapper.slide-down { display: block; opacity: 1; transform: translate(-50%, 260px); }
        #secret-btn { padding: 12px 28px; background: white; color: var(--red-flat); border: 2px dashed var(--red-flat); border-radius: 30px; cursor: pointer; font-weight: 700; font-family: 'Quicksand', sans-serif; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }

        #gift-panel { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.7); width: 320px; background: white; border-radius: 20px; padding: 15px; box-shadow: 0 0 100px rgba(0,0,0,0.4); z-index: 2000; text-align: center; opacity: 0; transition: opacity 0.6s ease, transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1); }
        #gift-panel.show { display: block; opacity: 1; transform: translate(-50%, -50%) scale(1); }
        .secret-img { width: 100%; border-radius: 12px; margin-bottom: 10px; border: 1px solid #eee; max-height: 400px; object-fit: cover; }

        .object { position: fixed; bottom: 0px; font-size: 280px; transition: 1.5s ease; opacity: 0; z-index: 5; filter: drop-shadow(0 10px 20px rgba(0,0,0,0.15)); }
        #tree { left: -400px; } 
        #gift-box { right: -400px; }
        .show-objects #tree { left: 2%; opacity: 1; }
        .show-objects #gift-box { right: 2%; opacity: 1; }

        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @media (max-width: 800px) { .object { font-size: 180px; } }
    </style>
</head>
<body>

    <audio id="bg-music" src="music.mp3" loop preload="auto"></audio>

    <div id="loading-screen">
        <div style="border:4px solid white; border-top:4px solid var(--red-flat); border-radius:50%; width:40px; height:40px; animation:spin 1s linear infinite;"></div>
        <h2 class="handwriting" style="color: var(--red-flat); margin-top: 15px;">ƒêang chu·∫©n b·ªã qu√†...</h2>
        <p id="timer" style="font-size: 24px; font-weight: bold; color: var(--text-dark);">5</p>
    </div>

    <div id="password-screen">
        <h2 class="handwriting" style="color: var(--red-flat); font-size: 2rem;">M·∫≠t kh·∫©u l√† g√¨ ·∫•y nh·ªâ:3</h2>
        <input type="text" id="password-input" placeholder="Nh·∫≠p c√¢u tr·∫£ l·ªùi...">
        <br>
        <button class="capsule-2d" onclick="checkPassword()" style="padding: 10px 30px; font-size: 16px;">X√°c nh·∫≠n</button>
        <p id="error-msg" style="color: red; font-size: 0.8rem; margin-top: 10px; display: none;">Sai r√≤i coi kƒ© xem c√≥ nh·∫ßm khem, nh·∫≠p l·∫°i ƒëi! ‚ù§Ô∏è</p>
    </div>

    <div class="lights" id="light-container"></div>

    <div id="start-btn-container">
        <button class="capsule-2d" onclick="startExperience()">·∫§n v√¥ ƒë√¢y ƒëii ‚ù§Ô∏è</button>
    </div>

    <div class="card-container" id="cardContainer">
        <div class="book" id="book" onclick="openBook()">
            <div class="page page-right">
                <h2 class="handwriting" style="color: var(--red-flat); margin-bottom: 10px;">Merry Christmas!</h2>
                <div style="font-size: 1rem; line-height: 1.5; color: var(--text-dark);">
                    <p>Ch√∫c bbi c·ªßa bin gi√°ng sinh vui v·∫ª nh√≥.</p>
                    <p>Bin hay b·ªã b√≠ t·ª´ l√©m l√™n l√†...</p>
                    <p>Bin ch√∫c ng·ªçc gi√°ng sinh vui v·∫ªe!</p>
                    <p>m·∫°nh kh·ªèe , ham ƒÉn ch√≥ng l·ªõn</p>
                    <P>V√† c√πng bin ƒëi qua nh√¨u m√πa gi√°ng sinh n·ªØa nh√°:3</P>
                </div>
                <p style="font-size: 1.5rem;">üéÑ‚ú®üéÅ</p>
            </div>
            <div class="page page-left">
                <div class="page-left-content">
                    <img src="https://i.ibb.co/NgNW0Zs8/NgNW0Zs8.jpg" class="ny-photo">
                    <p class="handwriting" style="font-size: 1.5rem; color: var(--red-flat); margin-top: 10px;">‚ù§ ch√¢n dung g√°i ƒë·∫πp c·ªßa bin ‚ù§</p>
                </div>
            </div>
            <div class="page cover-front">
                <h1 class="handwriting" style="font-size: 2rem;">Ch√∫c bbi c·ªßa bin noel zui z·∫ª</h1>
                <span style="font-size: 3rem;">üëë</span>
                <p style="margin-top: 15px; font-size: 0.8rem; opacity: 0.8;">( Ch·∫°m ƒë·ªÉ m·ªü )</p>
            </div>
        </div>
    </div>

    <div id="secret-btn-wrapper">
        <button id="secret-btn" onclick="showGift()">???</button>
    </div>

    <div id="gift-panel">
        <h3 style="color: var(--red-flat); margin-top: 0;">Surprise! üéÅ</h3>
        <img src="https://i.ibb.co/8gZR2cSL/8gZR2cSL.jpg" class="secret-img">
        <p style="font-size: 0.9rem; color: var(--text-dark);">qu√† bin t·∫∑ng ng·ªçc n√®eeee *bin k bt ch·ª•p nhu n√†o c·∫£:3!</p>
        <button onclick="closeGift()" style="cursor:pointer; padding: 10px 25px; border:none; background:var(--red-flat); color:white; border-radius:10px; font-weight:700;">ƒê√≥ng</button>
    </div>

    <div id="tree" class="object">üéÑ</div>
    <div id="gift-box" class="object">üéÅ</div>

    <script>
        window.onload = function() {
            let timeLeft = 5;
            const timerElement = document.getElementById('timer');
            const countdown = setInterval(() => {
                timeLeft--;
                if(timerElement) timerElement.innerText = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(countdown);
                    const loader = document.getElementById('loading-screen');
                    loader.style.opacity = '0';
                    setTimeout(() => {
                        loader.style.display = 'none';
                        document.getElementById('password-screen').style.display = 'block';
                    }, 800);
                }
            }, 1000);

            const lContainer = document.getElementById('light-container');
            const pinkColors = ['#ff4d6d', '#ffafcc', '#ffc2d1', '#ffffff', '#fb6f92'];
            for(let i=0; i<15; i++) {
                const l = document.createElement('div');
                l.className = 'light';
                const color = pinkColors[i % pinkColors.length];
                l.style.backgroundColor = color;
                l.style.color = color;
                l.style.animationDelay = Math.random() * 2 + 's';
                lContainer.appendChild(l);
            }
        };

        function checkPassword() {
            const input = document.getElementById('password-input').value.trim().toLowerCase();
            const correctPass = "bin iu ng·ªçc nh·ªõt";
            const errorMsg = document.getElementById('error-msg');
            const startBtn = document.getElementById('start-btn-container');
            const pwdScreen = document.getElementById('password-screen');

            if (input === correctPass) {
                pwdScreen.style.opacity = '0';
                setTimeout(() => {
                    pwdScreen.style.display = 'none';
                    startBtn.style.display = 'block';
                    setTimeout(() => { startBtn.style.opacity = '1'; }, 50);
                }, 500);
            } else {
                errorMsg.style.display = 'block';
                document.getElementById('password-input').style.borderColor = 'red';
            }
        }

        function startExperience() {
            const music = document.getElementById('bg-music');
            if(music) music.play();
            const btnContainer = document.getElementById('start-btn-container');
            btnContainer.style.opacity = '0';
            setTimeout(() => {
                btnContainer.style.display = 'none';
                document.getElementById('cardContainer').classList.add('is-visible');
            }, 600);
        }

        function openBook() {
            const book = document.getElementById('book');
            if(!book.classList.contains('open')) {
                book.classList.add('open');
                document.getElementById('cardContainer').classList.add('is-open');
                document.body.classList.add('show-objects');
                const secretWrapper = document.getElementById('secret-btn-wrapper');
                setTimeout(() => { 
                    secretWrapper.style.display = 'block';
                    setTimeout(() => { secretWrapper.classList.add('slide-down'); }, 50);
                }, 1200);
            }
        }

        function showGift() { 
            const panel = document.getElementById('gift-panel');
            panel.style.display = 'block';
            setTimeout(() => { panel.classList.add('show'); }, 10);
        }

        function closeGift() {
            const panel = document.getElementById('gift-panel');
            panel.classList.remove('show');
            setTimeout(() => { panel.style.display = 'none'; }, 600);
        }
    </script>
</body>
</html>
